
CREATE TABLE SACH_CHITIET
(
    ISBN INT PRIMARY KEY,
    TENSACH NVARCHAR2(50),
    THELOAI NVARCHAR2(50),
    TACGIA NVARCHAR2(50),
    NPH NVARCHAR2(50),
    NGXB DATE,
    KICHTHUOC VARCHAR2(50),
    LOAIBIA NVARCHAR2(50),
    SOTRANG NUMBER,
    NXB NVARCHAR2(50)
)
--------------------------------------------------------------------------------
CREATE TABLE SACH_SOLUOT
(
    ISBN INT PRIMARY KEY,
    TINHTRANG VARCHAR2(50),
    NGGIAHAN INT
)
--------------------------------------------------------------------------------
CREATE TABLE DOCGIA
(
    MADG VARCHAR2(50) PRIMARY KEY,
    TENDG VARCHAR2(50),
    DIACHI VARCHAR2(50),
    SDT VARCHAR2(50),
    EMAIL VARCHAR2(50),
    NGSINH DATE,
    GIOITINH VARCHAR2(10)
)
drop table BTL1.DOCGIA;
--------------------------------------------------------------------------------
CREATE TABLE TAIKHOAN
(
    TENTK VARCHAR2(50) PRIMARY KEY,
    MADG VARCHAR2(50),
    MATKHAU VARCHAR2(50),
    CONGNO DECIMAL,
    LOAITK varchar2(30)
)
--------------------------------------------------------------------------------
CREATE TABLE THUTHU
(
    MATT VARCHAR2(50) PRIMARY KEY,
    TENTT VARCHAR2(50),
    GIOITINH VARCHAR2(10),
    MAKHAU VARCHAR2(50)
)
drop table thuthu; 
--------------------------------------------------------------------------------
CREATE TABLE BTL1.MUONSACH
(
    MAMS VARCHAR2(50) PRIMARY KEY,
    MATT VARCHAR2(50),
    TENTK VARCHAR2(50),
    ISBN INT,
    NGMUON DATE,
    NGHETHAN DATE
)
--------------------------------------------------------------------------------
CREATE TABLE TRASACH
(
    MATS VARCHAR2(50) PRIMARY KEY,
    MAMS VARCHAR2(50),
    NGTRA DATE,
    CHIPHI DECIMAL
)
--------------------------------------------------------------------------------
ALTER TABLE SACH_SOLUOT 
ADD CONSTRAINT FK_SACH_SOlUOT_SACH_CHITIET FOREIGN KEY (ISBN) REFERENCES BTL1.SACH_CHITIET(ISBN);

-----------------------
ALTER TABLE TAIKHOAN 
ADD CONSTRAINT FK_TAIKHOAN_DOCGIA FOREIGN KEY (MADG) REFERENCES  BTL1.DOCGIA(MADG);

-----------------------
ALTER TABLE MUONSACH 
ADD CONSTRAINT FK_MUONSACH_TAIKHOAN FOREIGN KEY (TENTK) REFERENCES  BTL1.TAIKHOAN(TENTK);

-------------------------
ALTER TABLE MUONSACH 
ADD CONSTRAINT FK_MUONSACH_SACH_SOLUOT FOREIGN KEY (ISBN) REFERENCES  BTL1.SACH_SOLUOT(ISBN);

-------------------------
ALTER TABLE MUONSACH
ADD CONSTRAINT FK_MUONSACH_SACH_CHITIET FOREIGN KEY (ISBN) REFERENCES  BTL1.SACH_CHITIET(ISBN);

---------------------------
ALTER TABLE MUONSACH 
ADD CONSTRAINT FK_MUONSACH_THUTHU FOREIGN KEY (MATT) REFERENCES  BTL1.THUTHU(MATT);

-----------------------------
ALTER TABLE TRASACH 
ADD CONSTRAINT FK_TRASACH_MUONSACH FOREIGN KEY (MAMS) REFERENCES  BTL1.MUONSACH(MAMS);

--------------------------------------------------------------------------------

/* NHẬP ĐỘC GỈA */
/*TẠI TP.HCM*/
ALTER SESSION SET NLS_DATE_FORMAT ='DD/MM/YYYY';
INSERT INTO  DOCGIA VALUES('DG001', 'LE QUANG KHAI', 'TP.HCM', '0935959875', '19521656@gm.uit.edu.vn', '18/01/2001', 'NAM');
INSERT INTO  DOCGIA VALUES('DG002', 'LE THANH HIEU', 'TP.HCM', '0582830360', '19521498@gm.uit.edu.vn', '25/06/2001', 'NAM');
INSERT INTO  DOCGIA VALUES('DG005', 'LE VAN ANH DUC', 'TP.HCM', '0935959875', '19521374@gm.uit.edu.vn', '25/08/2001', 'NAM');
INSERT INTO  DOCGIA VALUES('DG006', 'HO THI MY VAN', 'TP.HCM', '01234569', 'htmv123@gm.uit.edu.vn', '28/11/2003', 'NU');
INSERT INTO  DOCGIA VALUES('DG009', 'NGUYEN DANG DO', 'TP.HCM', '963258741', 'NDD123@gm.uit.edu.vn', '22/11/2001', 'NAM');
INSERT INTO  DOCGIA VALUES('DG010', 'NGUYEN THI NHAN', 'TP.HCM', '123654789', 'NTN123@gm.uit.edu.vn', '23/01/2001', 'NU');
INSERT INTO  DOCGIA VALUES('DG013', 'PHAM BA VUONG', 'TP.HCM', '896541237', 'PBV123@gm.uit.edu.vn', '30/01/2001', 'NAM');
INSERT INTO  DOCGIA VALUES('DG014', 'NGUYEN ANH QUOC', 'TP.HCM', '5236998741', 'NAQ123@gm.uit.edu.vn', '20/11/2001', 'NAM');
INSERT INTO  DOCGIA VALUES('DG017', 'NGUYEN HOANG YEN LY', 'TP.HCM', '56321457', 'NHYL123@gm.uit.edu.vn', '26/03/2001', 'NU');
INSERT INTO  DOCGIA VALUES('DG018', 'TU MAU THANH NGAN', 'TP.HCM', '26959887', 'TMTN123@gm.uit.edu.vn', '02/01/2001', 'NU');


--------------------------------------------------------------------------------
/* NHẬP THỦ THƯ*/

INSERT INTO  THUTHU VALUES('19521656', 'LE QUANG KHAI', 'NAM', 'LQK123');
INSERT INTO  THUTHU VALUES('19521498', 'LE THANH HIEU', 'NAM', 'LTH123');
INSERT INTO  THUTHU VALUES('19521443', 'BANH HOANG GIANG', 'NAM', 'BHG123');
INSERT INTO  THUTHU VALUES('19521407', 'HOANG THAI DUONG', 'NAM', 'HTD123');


--------------------------------------------------------------------------------
/* NHẬP SÁCH*/
/*TẠI TP.HCM*/
INSERT INTO SACH_CHITIET VALUES ('011','Rừng Nauy', 'Tiểu thuyết', 'Haruki Murakami', 'Nhã Nam', '15/07/2021', '13 x 20.5 cm', 'Bìa mềm', 556, 'Nhà Xuất Bản Hội Nhà Văn');
INSERT INTO SACH_CHITIET VALUES ('012','Lâu Đài Bay Của Pháp Sư Howl', 'Tiểu thuyết', 'Diana Wynne Jones', 'Nhã Nam', '06/03/2020', '13 x 20.5 cm', 'Bìa mềm', 400, 'Nhà Xuất Bản Hội Nhà Văn');
INSERT INTO SACH_CHITIET VALUES ('013','Harry Potter Và Bảo Bối Tử Thần', 'Tiểu thuyết', 'J.K. Rowling', 'NXB Trẻ', '1/07/2017', '	14 x 20 cm', 'Bìa cứng', 846, '	Nhà Xuất Bản Hội Nhà Văn');
INSERT INTO SACH_CHITIET VALUES ('014','Chúa Tể Những Chiếc Nhẫn', 'Tiểu thuyết', ' J.RR.Tolkien', 'Nhã Nam', '15/07/2021', '15 x 24 cm', 'Bìa cứng', 544, 'Nhà Xuất Bản Hội Nhà Văn');
INSERT INTO SACH_CHITIET VALUES ('015','Trò Chơi Vương Quyền', 'Tiểu thuyết', 'George R. R. Martin', 'Alphabooks', '15/10/2020', '	14 x 20.5 cm', 'Bìa cứng', 716, 'Nhà Xuất Bản Văn học');
INSERT INTO SACH_CHITIET VALUES ('016','The Book Thief', 'English Book', 'Markus Zusak', 'Penguin Random House', '01/01/2021', '12.7 x 19.8 cm', 'Bìa cứng', 416, 'Penguin Random House');
INSERT INTO SACH_CHITIET VALUES ('017','The Godfather', 'English Book', ' Mario Puzo', 'Penguin Random House', '15/05/2020', '    12.7 x 19.8 cm', 'Bìa cứng', 595, 'Penguin Random House');
INSERT INTO SACH_CHITIET VALUES ('018','The Shining', 'English Book', 'English Book', 'Penguin Random House', '5/09/2021', '    10.4 x 17.3 cm', 'Bìa mềm', 659, 'Penguin Random House');
INSERT INTO SACH_CHITIET VALUES ('019','To Kill A Mockingbird', 'English Book', 'Harper Lee', 'Penguin Random House', '07/05/2020', '    14 x 20.5 cm', 'Bìa mềm', 716, 'Penguin Random House');
INSERT INTO SACH_CHITIET VALUES ('020','The Fault In Our Stars', 'English Book', 'John Green', 'Penguin Random House', '06/03/2018', '12.9 x 19.8 cm', 'Bìa mềm', 364, 'Penguin Random House');

INSERT INTO  SACH_SOLUOT VALUES ('011','Available',15);
INSERT INTO  SACH_SOLUOT VALUES ('012','Available',15);
INSERT INTO  SACH_SOLUOT VALUES ('013','Available',15);
INSERT INTO  SACH_SOLUOT VALUES ('014','Available',15);
INSERT INTO  SACH_SOLUOT VALUES ('015','Available',15);
INSERT INTO  SACH_SOLUOT VALUES ('016','Available',10);
INSERT INTO  SACH_SOLUOT VALUES ('017','Available',10);
INSERT INTO  SACH_SOLUOT VALUES ('018','Available',10);
INSERT INTO  SACH_SOLUOT VALUES ('019','Available',10);
INSERT INTO  SACH_SOLUOT VALUES ('020','Available',10);


--------------------------------------------------------------------------------
/* NHẬP TÀI KHOẢN*/
/*TẠI TP.HCM*/
INSERT INTO  TAIKHOAN VALUES('LQK123', 'DG001', 'LQK123', 0, 'VIP');
INSERT INTO  TAIKHOAN VALUES('LTH123', 'DG002', 'LTH123', 0,'THUONG');
INSERT INTO  TAIKHOAN VALUES('LVAD123', 'DG005', 'LVAD123', 0,'THUONG');
INSERT INTO  TAIKHOAN VALUES('HTMV123', 'DG006', 'HTMV123', 0, 'THUONG');
INSERT INTO  TAIKHOAN VALUES('NDD123', 'DG009', 'NDD123', 0,'VIP');
INSERT INTO  TAIKHOAN VALUES('NTN123', 'DG010', 'NTN123', 0,'VIP');
INSERT INTO  TAIKHOAN VALUES('PBV123', 'DG013', 'PBV123', 0,'VIP');
INSERT INTO  TAIKHOAN VALUES('NAQ123', 'DG014', 'NAQ123', 0,'VIP');
INSERT INTO  TAIKHOAN VALUES('NHYL123', 'DG017', 'NHYL123', 0,'VIP');
INSERT INTO  TAIKHOAN VALUES('TMTN123', 'DG018', 'TMTN123', 0,'THUONG');


--------------------------------------------------------------------------------
/* NHẬP MƯỢN SÁCH*/
/*TẠI TP.HCM*/
INSERT INTO  MUONSACH VALUES('MS001', '19521656', 'LQK123', '011', '25/11/2021', '15/12/2021');
INSERT INTO  MUONSACH VALUES('MS006', '19521656', 'LQK123', '012', '25/11/2021', '15/12/2021');
INSERT INTO  MUONSACH VALUES('MS012', '19521656', 'LQK123', '013', '25/11/2021', '15/12/2021');
INSERT INTO  MUONSACH VALUES('MS013', '19521656', 'LQK123', '014', '25/11/2021', '15/12/2021');
INSERT INTO  MUONSACH VALUES('MS014', '19521656', 'LQK123', '015', '25/11/2021', '15/12/2021');
INSERT INTO  MUONSACH VALUES('MS015', '19521656', 'LQK123', '016', '25/11/2021', '15/12/2021');
INSERT INTO  MUONSACH VALUES('MS016', '19521656', 'LQK123', '017', '25/11/2021', '15/12/2021');
INSERT INTO  MUONSACH VALUES('MS017', '19521656', 'LQK123', '018', '25/11/2021', '15/12/2021');
INSERT INTO  MUONSACH VALUES('MS018', '19521656', 'LQK123', '019', '25/11/2021', '15/12/2021');
INSERT INTO  MUONSACH VALUES('MS003', '19521443', 'LTH123', '011', '28/11/2021', '18/12/2021');
INSERT INTO  MUONSACH VALUES('MS034', '19521656', 'LTH123', '012', '25/11/2021', '15/12/2021');
INSERT INTO  MUONSACH VALUES('MS035', '19521656', 'LTH123', '013', '25/11/2021', '15/12/2021');
INSERT INTO  MUONSACH VALUES('MS036', '19521656', 'LTH123', '014', '25/11/2021', '15/12/2021');
INSERT INTO  MUONSACH VALUES('MS037', '19521656', 'LTH123', '015', '25/11/2021', '15/12/2021');
INSERT INTO  MUONSACH VALUES('MS038', '19521656', 'LTH123', '016', '25/11/2021', '15/12/2021');
INSERT INTO  MUONSACH VALUES('MS039', '19521656', 'LTH123', '017', '25/11/2021', '15/12/2021');
INSERT INTO  MUONSACH VALUES('MS040', '19521656', 'LTH123', '018', '25/11/2021', '15/12/2021');
INSERT INTO  MUONSACH VALUES('MS041', '19521656', 'LTH123', '019', '25/11/2021', '15/12/2021');
INSERT INTO  MUONSACH VALUES('MS042', '19521656', 'LTH123', '020', '25/11/2021', '15/12/2021');
INSERT INTO  MUONSACH VALUES('MS043', '19521656', 'NTN123', '016', '25/11/2021', '15/12/2021');
INSERT INTO  MUONSACH VALUES('MS044', '19521656', 'NTN123', '017', '25/11/2021', '15/12/2021');
INSERT INTO  MUONSACH VALUES('MS045', '19521656', 'NTN123', '018', '25/11/2021', '15/12/2021');
INSERT INTO  MUONSACH VALUES('MS046', '19521656', 'NTN123', '019', '25/11/2021', '15/12/2021');
INSERT INTO  MUONSACH VALUES('MS047', '19521656', 'NTN123', '020', '25/11/2021', '15/12/2021');
INSERT INTO  MUONSACH VALUES('MS011', '19521443', 'NTN123', '011', '28/11/2021', '18/12/2021');
INSERT INTO  MUONSACH VALUES('MS007', '19521498', 'NTN123', '012', '25/11/2021', '05/12/2021');
INSERT INTO  MUONSACH VALUES('MS009', '19521443', 'HTMV123', '011', '29/11/2021', '14/12/2021');
INSERT INTO  MUONSACH VALUES('MS010', '19521656', 'LVAD123', '012', '27/11/2021', '12/12/2021');


--------------------------------------------------------------------------------
/* NHẬP TRẢ SÁCH */
/*TẠI TP.HCM*/
INSERT INTO  TRASACH VALUES('TS001', 'MS001', '10/12/2021', 0);
INSERT INTO  TRASACH VALUES('TS003', 'MS003', '30/12/2021', 0);
INSERT INTO  TRASACH VALUES('TS006', 'MS006', '3/12/2021', 0);
INSERT INTO  TRASACH VALUES('TS007', 'MS007', '1/12/2021', 0);
INSERT INTO  TRASACH VALUES('TS009', 'MS009', '20/12/2021', 50);
INSERT INTO  TRASACH VALUES('TS010', 'MS010', '14/12/2021', 50);