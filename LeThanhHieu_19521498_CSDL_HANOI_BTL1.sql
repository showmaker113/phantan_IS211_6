CREATE TABLE SACH_CHITIET
(
    ISBN INT PRIMARY KEY,
    TENSACH NVARCHAR2(50),
    THELOAI NVARCHAR2(50),
    TACGIA NVARCHAR2(50),
    NPH NVARCHAR2(50),
    NGXB DATE,
    KICHTHUOC VARCHAR2(50),
    LOAIBIA NVARCHAR2(50),
    SOTRANG NUMBER,
    NXB NVARCHAR2(50)
)
--------------------------------------------------------------------------------
CREATE TABLE SACH_SOLUOT
(
    ISBN INT PRIMARY KEY,
    TINHTRANG VARCHAR2(50),
    NGGIAHAN INT
)
--------------------------------------------------------------------------------
CREATE TABLE DOCGIA
(
    MADG VARCHAR2(50) PRIMARY KEY,
    TENDG VARCHAR2(50),
    DIACHI VARCHAR2(50),
    SDT VARCHAR2(50),
    EMAIL VARCHAR2(50),
    NGSINH DATE,
    GIOITINH VARCHAR2(10)
)
--------------------------------------------------------------------------------
CREATE TABLE TAIKHOAN
(
    TENTK VARCHAR2(50) PRIMARY KEY,
    MADG VARCHAR2(50),
    MATKHAU VARCHAR2(50),
    CONGNO DECIMAL,
    LOAITK VARCHAR2(30)
)
--------------------------------------------------------------------------------
CREATE TABLE THUTHU
(
    MATT VARCHAR2(50) PRIMARY KEY,
    TENTT VARCHAR2(50),
    GIOITINH VARCHAR2(10),
    MAKHAU VARCHAR2(50)
)
--------------------------------------------------------------------------------
CREATE TABLE MUONSACH
(
    MAMS VARCHAR2(50) PRIMARY KEY,
    MATT VARCHAR2(50),
    TENTK VARCHAR2(50),
    ISBN INT,
    NGMUON DATE,
    NGHETHAN DATE
)
--------------------------------------------------------------------------------
CREATE TABLE TRASACH
(
    MATS VARCHAR2(50) PRIMARY KEY,
    MAMS VARCHAR2(50),
    NGTRA DATE,
    CHIPHI DECIMAL
)
--------------------------------------------------------------------------------
ALTER TABLE SACH_SOLUOT 
ADD CONSTRAINT FK_SACH_SOlUOT_SACH_CHITIET FOREIGN KEY (ISBN) REFERENCES SACH_CHITIET(ISBN);

ALTER TABLE TAIKHOAN 
ADD CONSTRAINT FK_TAIKHOAN_DOCGIA FOREIGN KEY (MADG) REFERENCES DOCGIA(MADG);

ALTER TABLE MUONSACH 
ADD CONSTRAINT FK_MUONSACH_TAIKHOAN FOREIGN KEY (TENTK) REFERENCES TAIKHOAN(TENTK);
ALTER TABLE MUONSACH 
ADD CONSTRAINT FK_MUONSACH_SACH_SOLUOT FOREIGN KEY (ISBN) REFERENCES SACH_SOLUOT(ISBN);
ALTER TABLE MUONSACH 
ADD CONSTRAINT FK_MUONSACH_SACH_CHITIET FOREIGN KEY (ISBN) REFERENCES SACH_CHITIET(ISBN);
ALTER TABLE MUONSACH 
ADD CONSTRAINT FK_MUONSACH_THUTHU FOREIGN KEY (MATT) REFERENCES THUTHU(MATT);

ALTER TABLE TRASACH 
ADD CONSTRAINT FK_TRASACH_MUONSACH FOREIGN KEY (MAMS) REFERENCES MUONSACH(MAMS);
--------------------------------------------------------------------------------
/* NH?P ??C GI? */
/*TẠI HÀ NỘI*/
ALTER SESSION SET NLS_DATE_FORMAT ='DD/MM/YYYY';
INSERT INTO DOCGIA VALUES('DG003', 'NGUYEN VAN LUC', 'HA NOI', '0845250079', '19521811@gm.uit.edu.vn', '19/01/2001', 'NAM');
INSERT INTO DOCGIA VALUES('DG004', 'DANG MINH QUAN', 'HA NOI', '0901988081', '19520867@gm.uit.edu.vn', '21/07/2001', 'NAM');
INSERT INTO DOCGIA VALUES('DG007', 'DUONG DUC DAO', 'HA NOI', '269988752', 'DDD258@gm.uit.edu.vn', '27/11/2001', 'NAM');
INSERT INTO DOCGIA VALUES('DG008', 'PHAM QUOC DUY HUNG', 'HA NOI', '25896336', 'PQDH123@gm.uit.edu.vn', '27/11/2001', 'NAM');
INSERT INTO DOCGIA VALUES('DG011', 'TAN THUY TRANG', 'HA NOI', '12556632', 'TTT123@gm.uit.edu.vn', '02/01/2001', 'NU');
INSERT INTO DOCGIA VALUES('DG012', 'AN HONG KIM Y', 'HA NOI', '258963147', 'AHKY123@gm.uit.edu.vn', '02/03/2001', 'NU');
INSERT INTO DOCGIA VALUES('DG015', 'NGUYUEN QUOC THANG', 'HA NOI', '2558963312', 'NQT123@gm.uit.edu.vn', '30/01/2001', 'NAM');
INSERT INTO DOCGIA VALUES('DG016', 'VO CONG GIA MI', 'HA NOI', '12366654', 'VCGM123@gm.uit.edu.vn', '14/01/2001', 'NU');
INSERT INTO DOCGIA VALUES('DG019', 'LE PHUONG TRINH', 'HA NOI', '123654987', 'LPT123@gm.uit.edu.vn', '30/10/2002', 'NU');
INSERT INTO DOCGIA VALUES('DG020', 'PHAM KIM KHANH', 'HA NOI', '2589631456', 'PKK123@gm.uit.edu.vn', '02/11/2001', 'NAM');

SELECT * FROM DOCGIA;
--------------------------------------------------------------------------------
/* NH?P TH? TH?*/

INSERT INTO THUTHU VALUES('19521656', 'LE QUANG KHAI', 'NAM', 'LQK123');
INSERT INTO THUTHU VALUES('19521498', 'LE THANH HIEU', 'NAM', 'LTH123');
INSERT INTO THUTHU VALUES('19521443', 'BANH HOANG GIANG', 'NAM', 'BHG123');
INSERT INTO THUTHU VALUES('19521407', 'HOANG THAI DUONG', 'NAM', 'HTD123');

SELECT * FROM THUTHU
--------------------------------------------------------------------------------
/* NHẬP SÁCH*/
/*TẠI HÀ NỘI*/
INSERT INTO SACH_CHITIET VALUES ('001','Trà Hoa Nữ', 'Văn học', 'Alexander Dumas', 'Minh Long', '15/03/2017', '14,5 x 20,5 cm', 'Bìa mềm', 300, 'Nhà Xuất Bản Kim Đồng');
INSERT INTO SACH_CHITIET VALUES ('002','Những Cuộc Phiêu Lưu Của Tom Sawyer', 'Văn học', 'Mark Twain', 'Đinh Tị', '13/07/2015', '14,5 x 20,5 cm', 'Bìa mềm', 430, 'Nhà Xuất Bản Văn Học');
INSERT INTO SACH_CHITIET VALUES ('003','Những Cuộc Phiêu Lưu Của Huckleberry Finn', 'Văn học', 'Mark Twain', 'Đinh Tị', '1/11/2018', '14,5 x 20,5 cm', 'Bìa mềm', 415, 'Nhà Xuất Bản Văn Học');
INSERT INTO SACH_CHITIET VALUES ('004','Jane Eyre', 'Văn học', 'Charlotte Bronte', 'Sterling Publishing', '1/01/2017', '14,5 x 20,5 cm', 'Bìa mềm', 520, 'Sterling Publishing Co Inc');
INSERT INTO SACH_CHITIET VALUES ('005','Chiến Tranh Và Hoà Bình', 'Văn học', 'Lev Tolstoy', 'Trí Việt', '1/01/2017', '16 x 24 cm', 'Bìa mềm', 1836, 'Nhà Xuất Bản Văn Học');
INSERT INTO SACH_CHITIET VALUES ('006','Grimgar - Ảo ảnh và tro tàn', 'Light Novel', 'Ao Jyumonji, Eiri Shirai', 'NXB Kim Đồng', '06/09/2021', '14,5 x 20,5 cm', 'Bìa mềm', 384, 'Nhà Xuất Bản Kim Đồng');
INSERT INTO SACH_CHITIET VALUES ('007','Your Name', 'Light Novel', 'Shinkai Makoto', 'IPM', '26/05/2017', '13 x 18 cm', 'Bìa mềm', 256, 'NXB Kim Đồng');
INSERT INTO SACH_CHITIET VALUES ('008','Sword Art Online', 'Light Novel', 'Reki Kawahara', 'IPM', '1/01/2017', '13 x 18 cm', 'Bìa mềm', 328, 'Nhà Xuất Bản Kim Đồng');
INSERT INTO SACH_CHITIET VALUES ('009','Gosick', 'Light Novel', 'Kazuki Sakuraba', 'Wings Books', '15/04/2021', '13 x 18 cm', 'Bìa mềm', 276, 'Nhà Xuất Bản Kim Đồng');
INSERT INTO SACH_CHITIET VALUES ('010','Suzumiya Haruhi', 'Light Novel', 'Tanigawa Nagaru', 'IPM', '1/01/2017', '10.5 x 14.8 cm', 'Bìa mềm', 383, 'Nhà Xuất Bản Văn Học');

INSERT INTO SACH_SOLUOT VALUES ('001','Available',20);
INSERT INTO SACH_SOLUOT VALUES ('002','Available',20);
INSERT INTO SACH_SOLUOT VALUES ('003','Available',20);
INSERT INTO SACH_SOLUOT VALUES ('004','Available',20);
INSERT INTO SACH_SOLUOT VALUES ('005','Available',20);
INSERT INTO SACH_SOLUOT VALUES ('006','Available',20);
INSERT INTO SACH_SOLUOT VALUES ('007','Available',20);
INSERT INTO SACH_SOLUOT VALUES ('008','Available',20);
INSERT INTO SACH_SOLUOT VALUES ('009','Available',20);
INSERT INTO SACH_SOLUOT VALUES ('010','Available',20);

SELECT * FROM SACH_SOLUOT
SELECT * FROM SACH_CHITIET

--------------------------------------------------------------------------------
/* NH?P TÀI KHOẢN*/
/*TẠI HÀ NỘI*/
INSERT INTO TAIKHOAN VALUES('NVL123', 'DG003', 'NVL123', 0, 'VIP');
INSERT INTO TAIKHOAN VALUES('DMQ123', 'DG004', 'DMQ123', 0, 'VIP');
INSERT INTO TAIKHOAN VALUES('DDD123', 'DG007', 'DDD123', 0, 'VIP');
INSERT INTO TAIKHOAN VALUES('PQDH123', 'DG008', 'PQDH123', 0,'THUONG');
INSERT INTO TAIKHOAN VALUES('TTQ123', 'DG011', 'TTQ123', 0, 'THUONG');
INSERT INTO TAIKHOAN VALUES('AHKY123', 'DG012', 'AHKY123', 0, 'VIP');
INSERT INTO TAIKHOAN VALUES('NQT123', 'DG015', 'NQT123', 0, 'THUONG');
INSERT INTO TAIKHOAN VALUES('VCGM13', 'DG016', 'VCGM123', 0, 'THUONG');
INSERT INTO TAIKHOAN VALUES('LPT123', 'DG019', 'LPT123', 0, 'THUONG');
INSERT INTO TAIKHOAN VALUES('PKK123', 'DG020', 'PKK123', 0, 'VIP');

SELECT * FROM TAIKHOAN;
--------------------------------------------------------------------------------
/* NH?P MƯỢN SÁCH*/
/*TẠI HÀ NỘI*/
INSERT INTO MUONSACH VALUES('MS002', '19521498', 'DMQ123', '001', '27/11/2021', '17/12/2021');
INSERT INTO MUONSACH VALUES('MS019', '19521656', 'DMQ123', '002', '25/11/2021', '15/12/2021');
INSERT INTO MUONSACH VALUES('MS020', '19521656', 'DMQ123', '003', '25/11/2021', '15/12/2021');
INSERT INTO MUONSACH VALUES('MS021', '19521656', 'DMQ123', '004', '25/11/2021', '15/12/2021');
INSERT INTO MUONSACH VALUES('MS022', '19521656', 'DMQ123', '005', '25/11/2021', '15/12/2021');
INSERT INTO MUONSACH VALUES('MS023', '19521656', 'DMQ123', '006', '25/11/2021', '15/12/2021');
INSERT INTO MUONSACH VALUES('MS024', '19521656', 'DMQ123', '007', '25/11/2021', '15/12/2021');
INSERT INTO MUONSACH VALUES('MS025', '19521656', 'DMQ123', '008', '25/11/2021', '15/12/2021');
INSERT INTO MUONSACH VALUES('MS026', '19521656', 'DMQ123', '009', '25/11/2021', '15/12/2021');
INSERT INTO MUONSACH VALUES('MS027', '19521656', 'DMQ123', '010', '25/11/2021', '15/12/2021');
INSERT INTO MUONSACH VALUES('MS005', '19521656', 'DDD123', '008', '25/11/2021', '15/12/2021');
INSERT INTO MUONSACH VALUES('MS004', '19521407', 'PQDH123', '006', '26/11/2021', '16/12/2021');
INSERT INTO MUONSACH VALUES('MS008', '19521407', 'NVL123', '009', '25/11/2021', '15/12/2021');
INSERT INTO MUONSACH VALUES('MS028', '19521656', 'NVL123', '001', '25/11/2021', '15/12/2021');
INSERT INTO MUONSACH VALUES('MS029', '19521656', 'NVL123', '002', '25/11/2021', '15/12/2021');
INSERT INTO MUONSACH VALUES('MS030', '19521656', 'NVL123', '003', '25/11/2021', '15/12/2021');
INSERT INTO MUONSACH VALUES('MS031', '19521656', 'NVL123', '004', '25/11/2021', '15/12/2021');
INSERT INTO MUONSACH VALUES('MS032', '19521656', 'NVL123', '005', '25/11/2021', '15/12/2021');
INSERT INTO MUONSACH VALUES('MS033', '19521656', 'NVL123', '006', '25/11/2021', '15/12/2021');

SELECT * FROM MUONSACH 
--------------------------------------------------------------------------------
/* NH?P TRẢ SÁCH */
/*TẠI HÀ NỘI*/
INSERT INTO TRASACH VALUES('TS002', 'MS002', '16/12/2021', 0);
INSERT INTO TRASACH VALUES('TS004', 'MS004', '25/12/2021', 150);
INSERT INTO TRASACH VALUES('TS005', 'MS005', '10/12/2021', 0);
INSERT INTO TRASACH VALUES('TS008', 'MS008', '22/12/2021', 50);

SELECT * FROM TRASACH
